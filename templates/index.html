<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DataWeek</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js" integrity="sha512-ElRFoEQdI5Ht6kZvyzXhYG9NqjtkmlkfYk0wr6wHxU9JEHakS7UJZNeml5ALk+8IKlU6jDgMabC3vkumRokgJA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>
<body>
    <div style="width:400Px;height:400px;">
        <canvas id="graph1"></canvas>
    </div>
    <script>

        async function getData(){
            const response = await fetch("/pictures");
            const data = await response.json();
            return data;
        }
        let data = getData();
        let nbPpl
        let nbMan
        let nbWomen
        data.then(value => {nbPpl = value['nb_ppl']
                            nbMan = value['nb_man']
                            nbWomen = value['nb_women']
                            console.log(nbMan)
                            let ctx = document.getElementById("graph1").getContext('2d')
                            let dataGraph1 = {
                                    labels : ['Homme', 'Femme'],
                                    datasets: [{
                                        data : [nbMan, nbWomen],
                                        backgroundColor:[
                                            'rgb(54, 162, 235)',
                                            'rgb(255, 99, 132)'
                    
                                        ],
                                        hoverOffset : 10
                                        }]}

                            let config = {
                                type : 'doughnut',
                                data: dataGraph1,
                                options:{
                                    responsive:true,
                                    plugins:{
                                        title: {
                                            display: true,
                                            text: "Total : " + nbPpl + ""
                                        }
                                    }
                                },
                            };

                            let graph1 = new Chart(ctx, config)
                        
        })



        
    </script>
</body>

</html>
